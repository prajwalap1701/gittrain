name: Print Message on PR Title Edit or File Change

on:
  pull_request:
    types:
      - edited

  push:
    paths:
      - 'doc1.txt'

jobs:
  print-message:
    runs-on: ubuntu-latest

    env: 
      PR_TITLE: ${{ github.event.pull_request.title }}

    steps:
    - name: Check out repository
      uses: actions/checkout@v4

    - name: Print Message
      run: |
        echo "PR title: $PR_TITLE"
        jira_ticket=$(echo "$PR_TITLE" | grep -oP 'CM-\d+')
        echo "Jira ticket: $jira_ticket"
        if [[ -z $jira_ticket ]]; then
            echo "pull request does not have ticket number"
            exit 1
        else
            echo "pull request is refering to $jira_ticket ticket" 
